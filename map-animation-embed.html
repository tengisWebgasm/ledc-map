<div id="ajaxContent">
    <div id="map-animation-embed">
        <script>
            var datacenterDetails = {
                'newcastle': {
                    // NKG1
                    'endpoint': {
                        'tamworth': {
                            'ping': 4,
                        },
                        'dubbo': {
                            'ping': 9,
                        },
                        'albury': {
                            'ping': 11,
                        },
                        'equinixSydney': {
                            'ping': 3,
                        },
                        'nextDcSydney': {
                            'ping': 4
                        },
                        'nextDcBrisbane': {
                            'ping': 20,
                        },
                        'nextDcMelbourne': {
                            'ping': "TBA",
                        },
                    },
                    'carriers': [
                        'ledc',
                        'vocus',
                        'encoo',
                        'transgrid',
                        'vergetel',
                        'tpg',
                        'superloop',
                        'swoop',
                        'nexon'
                    ],
                    'msps': [
                        'toim',
                        'newcastleConnect',
                        'sabervox',
                    ]
                },
                'tamworth': {
                    // SIN1
                    'endpoint': {
                        'newcastle': {
                            'ping': 4,
                        },
                        'dubbo': {
                            'ping': 12,
                        },
                        'albury': {
                            'ping': 14,
                        },
                        'equinixSydney': {
                            'ping': 6,
                        },
                        'nextDcSydney': {
                            'ping': 7
                        },
                        'nextDcBrisbane': {
                            'ping': 23,
                        },
                        'nextDcMelbourne': {
                            'ping': "TBA",
                        },
                    },
                    'carriers': [
                        'ledc',
                        'vocus',
                        'encoo',
                        'transgrid',
                        'vergetel',
                    ],
                    'msps': [
                        'regionalIt',
                        'toim',
                        'tamworthBroadcast'
                    ]
                },
                'dubbo': {
                    // HKG2
                    'endpoint': {
                        'tamworth': {
                            'ping': 12
                        },
                        'equinixSydney': {
                            'ping': 6
                        },
                        'albury': {
                            'ping': 14,
                        },
                        'nextDcSydney': {
                            'ping': 7
                        },
                        'newcastle': {
                            'ping': 9
                        },
                        'nextDcBrisbane': {
                            'ping': 11,
                        },
                        'nextDcMelbourne': {
                            'ping': "TBA",
                        },
                    },
                    'carriers': [
                        'ledc',
                        'vocus',
                        'encoo',
                    ],
                    'msps': [
                        'regionalIt',
                        'toim',
                    ]
                },
                'albury': {
                    // CAN1
                    'endpoint': {
                        'newcastle': {
                            'ping': 9,
                        },
                        'tamworth': {
                            'ping': 12,
                        },
                        'dubbo': {
                            'ping': 14,
                        },
                        'equinixSydney': {
                            'ping': 6,
                        },
                        'nextDcSydney': {
                            'ping': 7
                        },
                        'nextDcBrisbane': {
                            'ping': 23,
                        },
                        'nextDcMelbourne': {
                            'ping': "TBA",
                        },
                    },
                    'carriers': [
                        'ledc',
                        'vocus',
                        'encoo',
                        'transgrid',
                    ],
                    'msps': [

                    ]
                    // Could add cloud providers to here in the future
                },
                'equinixSydney': {
                    // SIN1
                    'endpoint': {
                    },
                    'carriers': [
                    ],
                    'msps': [
                    ]
                },
                'nextDcSydney': {
                    // SIN1
                    'endpoint': {
                    },
                    'carriers': [
                    ],
                    'msps': [
                    ]
                },
                'nextDcBrisbane': {
                    // SIN1
                    'endpoint': {
                    },
                    'carriers': [
                    ],
                    'msps': [
                    ]
                },
                'nextDcMelbourne': {
                    // SIN1
                    'endpoint': {
                    },
                    'carriers': [
                    ],
                    'msps': [
                    ]
                },
            };
        </script>
        <style>
            html {
                font-family: 'Poppins', sans-serif;
            }

            body {
                margin: 0;
            }

            select {
                font: inherit;
            }

            .container {
                display: block;
                width: 100%;
                max-width: 1380px;
                margin-right: auto;
                margin-left: auto;
                padding-right: 50px;
                padding-left: 50px;
            }

            .button {
                display: inline-block;
                padding: 15px 24px 13px;
                border: none;
                border-radius: 100px;
                background-color: #212121;
                -webkit-transition: box-shadow 200ms ease-out;
                transition: box-shadow 200ms ease-out;
                font-family: Poppins, sans-serif;
                color: #fff;
                font-size: 14px;
                line-height: 1.43;
                font-weight: 600;
                text-decoration: none;
            }

            .button.button-primary {
                background-color: #001f5c;
                -webkit-transition: background-color 200ms ease-out, color 200ms ease-out, box-shadow 200ms ease-out;
                transition: background-color 200ms ease-out, color 200ms ease-out, box-shadow 200ms ease-out;
            }

            .button.button-primary.bg-primary-2 {
                background-color: #0097ce;
            }

            .button.button-primary.bg-primary-2:hover {
                background-color: #001f5c;
            }

            .button {
                display: inline-block;
                padding: 15px 24px 13px;
                border-radius: 100px;
                background-color: #212121;
                -webkit-transition: box-shadow 200ms ease-out;
                transition: box-shadow 200ms ease-out;
                font-family: Poppins, sans-serif;
                color: #fff;
                font-size: 14px;
                line-height: 1.43;
                font-weight: 600;
                text-decoration: none;
            }

            p {
                margin: 0;
            }

            #map-animation-embed * {
                box-sizing: border-box;
            }

            #map-element svg {
                width: auto;
                height: 100%;
            }

            #map-container {
                width: 100%;
                height: auto;
                position: relative;
            }

            #map-wrapper {
                height: 100%;
                width: 100%;
                position: relative;
            }

            #map-side-panel-overlay {
                display: none;
            }

            #map-side-panel {
                z-index: 2;
                transform: translateY(-88px);
                transition: transform 0.3s ease-out;
                position: relative;
                background-color: #FFFFFF;
            }

            #map-side-panel.notification-active {
                transform: translateY(-128px);
            }

            #map-side-panel__network-seperator {
                display: none;
            }

            #map-side-panel h2 {
                font-style: normal;
                font-weight: normal;
                font-size: 24px;
                line-height: 28px;
                margin: 0px;
                color: #010611;
            }

            #map-element-label {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 6px;

                position: absolute;
                z-index: 4;
                top: 16px;
                margin: auto 0;

                font-size: 14px;
                line-height: 24px;
            }

            .map-legend-section {
                display: flex;
                justify-content: center;
                align-items: stretch;


                background-color: #ffffff;
                box-shadow: 10px 10px 40px rgba(0, 0, 0, 0.1);
                border-radius: 100px;
                padding: 4px 16px;
            }

            .map-legend-part {
                display: flex;
                align-items: center;
                padding: 0 12px;
                border-right: 1px solid #D6D6D6;
            }

            .map-legend-part:last-of-type {
                border-right: none;
            }

            .city-select {
                width: 100%;
            }

            #map-element-label p {
                margin: 0;
            }

            #city-selection-container {
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
                gap: 20px;
                padding-top: 16px;
                padding-bottom: 24px;
            }

            #city-selection-expand {
                position: absolute;
                top: 0;
                left: 50%;
                height: 40px;
                width: 120px;
                transform: translate(-50%, calc(-100% + 12px));
                border: none;
                background-color: transparent;
                background-image: url("https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/Expand.svg");
                background-size: 80px 16px;
                background-repeat: no-repeat;
                background-position: 50%;
                cursor: pointer;
                z-index: 100;
            }

            .expand-icon {
                width: 16px;
                height: 16px;
                margin: auto;
                background-image: url("https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/expandIcon.svg");
                background-size: contain;
                transition: transform 0.5s ease;
            }

            #city-selection-expand * {
                cursor: pointer;
            }

            #city-selection-expand:active {
                opacity: 0.6;
            }

            #city-selection-icons {
                grid-area: icons;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                align-items: center;
            }

            #city-select-start {
                grid-area: select-start;
            }

            #city-select-end {
                grid-area: select-end;
            }

            .city-select select {
                width: 100%;
                height: 100%;

                background-image: url('https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/map-pin.svg');
                background-position: 16px 50%;
                background-size: 16px;
                background-repeat: no-repeat;
                border: 1px solid #e7e7e9;
                box-sizing: border-box;
                border-radius: 4px;
                padding: 12px;
                padding-left: 48px;
                color: #000000;

                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;

                font-style: normal;
                font-weight: 400;
                font-size: 14px;
                line-height: 24px;
            }

            .city-select select:disabled {
                opacity: 0.7;
            }

            .city-select select>option:disabled {
                color: #dadada;
            }

            .city-select {
                position: relative;
            }

            .city-select:after {
                content: "";
                width: 0;
                height: 0;
                position: absolute;
                pointer-events: none;
            }

            .city-select:after {
                border-left: 5px solid transparent;
                border-right: 6px solid transparent;
                top: 21px;
                right: 22px;
                border-top: 6px solid #010611;
            }

            .city-select[disabled]:after {
                opacity: 0.3;
            }

            .city-select[active] select {
                /* color: #6E6D7A; */
                color: #00005c;
                font-weight: 500;
            }

            .city-select-label {
                position: absolute;
                left: 8px;
                top: 4px;
                font-style: normal;
                font-weight: 500;
                font-size: 12px;
                line-height: 10px;
                color: #6e6d7a;

                display: none;
            }

            .city-select[active] .city-select-label {
                display: block;
            }

            .city-select-mini-label {
                font-style: normal;
                font-weight: normal;
                font-size: 14px;
                line-height: 20px;
                color: #6e6d7a;
            }

            .label-marker {
                width: 16px;
                height: 16px;
                border-radius: 4px;
                margin-right: 8px;
                align-self: center;
            }

            .label-line {
                width: 20px;
                height: 3px;
                margin-top: 8px;
                margin-bottom: 8px;
                margin-right: 8px;
                align-self: center;
            }

            #ping-display {
                font-style: normal;
                font-weight: 300;
                font-size: 36px;
                line-height: 43px;
                color: #00005c;
            }

            #city-destination-details[off] {
                /* display: none; */
                visibility: hidden;
            }

            #map-element {
                position: relative;
                width: auto;
                height: calc(100vh - 64px);
            }

            #map-svg {
                position: relative;
                z-index: 0;
            }

            #map-img {
                position: absolute;
	            top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                width: 100%;
            }

            #map-element-holder {
                height: auto;
                position: relative;
                z-index: 0;
                background-color: #8AB4F8;
                display: flex;
                justify-content: center;
                overflow: hidden;
            }

            #map-link-panel {
                position: absolute;
                left: 0px;
                top: 0px;
                display: flex;
                align-items: center;
                gap: 6px;
                padding: 12px 16px;

                background: #001F5C;
                box-shadow: 10px 10px 40px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                cursor: default;

                visibility: hidden;
                opacity: 0;

                transform: translate(-50%, calc(-100% - 20px));
                transition: opacity 0.3s ease-out;
                transition-property: visibility, opacity;
                transition-delay: 0.4s;
            }

            #map-link-panel.active-panel,
            #map-link-panel:hover {
                visibility: visible;
                opacity: 1;
            }

            #map-link-panel>p {
                font-family: 'Poppins';
                font-style: normal;
                font-weight: 400;
                font-size: 14px;
                line-height: 24px;
                color: #FFFFFF;
            }

            #map-link__arrow {
                position: absolute;
                left: 50%;
                bottom: 0;
                width: 10px;
                height: 5px;
                transform: translate(-50%, 100%);
                background-image: url("https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/ArrowDownPanel.svg");
                background-position: center;
                background-size: contain;
            }

            #map-link__city-name {
                margin-right: 6px;
            }

            #map-ping-panel {
                height: 2px;
                width: 2px;
                position: absolute;
                display: none;
                justify-content: center;
                left: 50px;
                top: 50px;
                transition: left 500ms cubic-bezier(0.45, 0, 0.55, 1),
                    top 500ms cubic-bezier(0.45, 0, 0.55, 1);
                cursor: default;
            }

            #map-ping-panel[active] {
                display: flex;
            }

            #map-ping-content {
                position: absolute;
                width: auto;
                height: auto;
                display: flex;
                flex-direction: column;
                justify-content: stretch;
                align-items: stretch;
                background-color: #001f5c;
                box-shadow: 10px 10px 40px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                color: #ffffff;
                white-space: nowrap;
                bottom: 16px;
                padding: 12px 16px;
                transition: transform 0.3s ease-out;
                transform-origin: bottom center;
            }

            #map-ping-content [city-label] {
                text-transform: capitalize;
            }

            #map__ping-main {
                display: flex;
                align-items: center;
                gap: 8px;
                padding-bottom: 12px;
                border-bottom: 1px solid #ffffff20;
            }

            #map__ping-main>svg {
                width: 9px;
                height: 41px;
            }

            #map-ping-button {
                position: absolute;
                background: #001f5c;
                transform: translateX(-50%) rotate(-45deg);
                width: 16px;
                height: 16px;
                bottom: -8px;
                left: 50%;
            }

            #map__ping-city-wrapper {
                flex: 1 0 auto;
                font-weight: 400;
                font-size: 14px;
                line-height: 1.71;
            }

            #map__ping-city-wrapper>div:first-child {
                margin-bottom: 8px;
            }

            .map__ping-city {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .map__ping-city-link,
            #map-link__city-link {
                padding-right: 18px;
                font-size: 14px;
                line-height: 20px;
                font-weight: 600;
                background-image: url('https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/chevron-right.svg');
                background-repeat: no-repeat;
                background-position: right center;
                text-decoration: none;
                color: #0097CE;
            }

            .map__ping-city-link:hover,
            #map-link__city-link:hover {
                text-decoration: underline;
            }

            #map-ping-panel-ping {
                font-size: 24px;
                line-height: 1.33;
                font-weight: 500;
                color: #34C759;
                font-family: 'Futura', 'Poppins', sans-serif;
            }

            #map__ping-mid {
                padding: 16px;
                border-top: solid;
                border-bottom: solid;
                border-width: 1px;
                border-color: #ffffff10;
            }

            #map__ping-mid-btn-wrapper {
                display: flex;
                flex-wrap: nowrap;
                gap: 6px;
            }

            #map__ping-mid-label {
                font-weight: 400;
                font-size: 11px;
                line-height: 16px;
                color: #ffffff;
                opacity: 0.5;
                margin-bottom: 8px;
            }

            #map__ping-foot {
                display: flex;
                padding-top: 8px;
                justify-content: space-between;
                align-items: center;
                font-size: 15px;
                line-height: 1.6;
            }

            #map__ping-foot-btn {
                display: flex;
                gap: 8px;
                text-decoration: none;
                color: inherit;
                font-weight: 600;
                font-size: 14px;
                line-height: 20px;
            }

            #map-side-panel-disclaimer {
                position: absolute;
                right: 0;
                left: 0;
                bottom: -16px;
                font-size: 12px;
                text-align: center;
            }

            #map-side-panel-disclaimer a {
                font-weight: 700;
                text-decoration: none;
                color: #001f5c;
                position: relative;
                z-index: 11;
            }

            #map-side-panel-disclaimer a:hover {
                text-decoration: underline;
            }

            #map-side-panel-a {}

            #map-panel-a-notification {
                max-height: 40px;
                height: 40px;
                overflow: hidden;

                display: flex;
                justify-content: stretch;
                align-items: flex-end;

                transition: max-height 0.3s ease-out, visibility 0.3s;
            }

            #map-panel-a-notification h1 {
                width: 100%;
                text-align: center;
                font-size: 18px;
                line-height: 20px;
                font-family: 'Futura', 'Poppins', sans-serif;
                font-weight: 500;
                color: #001F5C;
                margin: 0;
            }

            #map-side-panel-b {
                background: #ffffff;
                font-style: normal;
                font-weight: 400;
                font-size: 14px;
                line-height: 1.71;
                color: #414144;

                max-height: 0px;
                will-change: max-height;
                transition: max-height 0.5s ease;
                position: relative;
                overflow: hidden;
            }

            #map-side-panel-b[on] {
                left: 0px;
                top: 0px;
            }

            .map-side-panel__network-container {
                display: flex;
                gap: 20px;
            }

            .map-side-panel__network-wrapper {
                flex: 1 0;
            }

            .map-side-panel__network-wrapper p {
                margin-bottom: 6px;
                text-align: center;
            }

            .map-side-panel__network-top {
                position: relative;
            }

            .map-side-panel__carriers-wrapper {
                display: flex;
                max-width: 100%;
                position: relative;
                padding-bottom: 16px;
                /* to make hover shadow visible */
                max-width: 100%;
                overflow-y: visible;
                overflow-x: scroll;
                -ms-overflow-style: none;
                /* IE and Edge */
                scrollbar-width: none;
                /* Firefox */
            }

            /* Hide scrollbar for Chrome, Safari and Opera */
            .map-side-panel__carriers-wrapper::-webkit-scrollbar {
                display: none;
            }

            .map-side-panel__network-top:hover .carriers-nav-btn {
                visibility: visible;
                opacity: 100%;
            }

            .carriers-nav-btn {
                position: absolute;
                z-index: 1;
                top: 50%;
                width: 24px;
                height: 24px;
                box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.15);
                border-radius: 100px;
                background-position: center;
                background-repeat: no-repeat;
                background-size: 16px;
                visibility: hidden;
                opacity: 0;
                cursor: pointer;
                transition: opacity 0.2s ease-out, background-color 0.2s ease-out, visibility 0.2s;
                background-color: #FFFFFF;
                border: none;
            }

            .carriers-nav-btn:hover {
                background-color: #9d9d9d;
            }

            .carriers-nav-btn:active {
                background-color: #4d4d4d;
            }

            .carriers-nav-btn.left {
                background-image: url("https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/arrow-left-black.svg");
                left: 0;
                transform: translate(-50%, calc(-50% - 12px));
            }

            .carriers-nav-btn.right {
                background-image: url("https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/arrow-right-black.svg");
                right: 0;
                transform: translate(50%, calc(-50% - 12px));
            }

            /* .service-container {
	display: grid;
	margin: 16px 0px 8px;
	grid-template-columns: 1fr 1fr 1fr;
	grid-auto-rows: 46px;
	column-gap: 6px;
	row-gap: 8px;
}

.service-container[collapsed] {
	height: 100px;
	overflow: hidden;
}

.service-container-collapse {
	font-size: 12px;
	line-height: 12px;
	text-align: center;
	color: #05a8d0;
	transition: opacity ease 200ms;
	opacity: 0;
	pointer-events: none;
	margin-top: 2px;
	margin-bottom: 0px;
}

.service-container-collapse:hover {
	text-decoration: underline;
}

.service-container-collapse[numCollapsing] {
	opacity: 1;
	pointer-events: all;
	margin-bottom: 10px;
	cursor: pointer;
} */

            .service-item {
                box-sizing: border-box;
                border: none;
                /* cursor: pointer; */
                /* border: 2px solid transparent; */
                flex: 0 0 16.66%;
                padding-left: 1px;
                padding-right: 1px;
                background: #FFFFFF;
                /* transition: box-shadow 0.2s ease-out, border-color 0.2s ease-out; */
                overflow: hidden;
            }

            /* .service-item[active] {
	border-color: #0097CE;
} */

            .service-item div {
                position: relative;
                padding-top: 65%;
                background: #F5F5F5;
            }

            .service-item div img {
                max-width: 90%;
                max-height: 60%;
                top: 50%;
                bottom: 0;
                right: 0;
                left: 50%;
                transform: translate(-50%, -50%);
                position: absolute;
                object-fit: contain;
            }

            /* .service-item:hover {
	box-shadow: 0px 8px 8px rgba(0, 0, 0, 0.15);
} */

            .map-side-panel__cloud-wrapper {
                border-top: 1px solid #D6D6D6;
                padding-bottom: 16px;
                /* display: none; */
                /* max-height: 0px; */
                /* will-change: max-height; */
                overflow: hidden;
                /* transition: max-height 0.5s ease; */
            }

            .map-side-panel__cloud-wrapper p {
                margin-top: 16px;
                margin-bottom: 6px;
            }

            .map-side-panel__msp-wrapper {
                display: flex;
                justify-content: center;
                max-width: 100%;
                position: relative;
                overflow-y: visible;
                overflow-x: scroll;
                -ms-overflow-style: none;
                /* IE and Edge */
                scrollbar-width: none;
                /* Firefox */
            }

            /* Hide scrollbar for Chrome, Safari and Opera */
            .map-side-panel__msp-wrapper::-webkit-scrollbar {
                display: none;
            }

            .msp-provider {
                box-sizing: border-box;
                border: none;
                flex: 0 0 16.66%;
                padding-left: 1px;
                padding-right: 1px;
                background: #FFFFFF;
                /* transition: box-shadow 0.2s ease-out; */
                overflow: hidden;
            }

            .msp-provider div {
                position: relative;
                padding-top: 65%;
                background: #F5F5F5;
            }

            .msp-provider div img {
                max-width: 90%;
                max-height: 50%;
                top: 50%;
                bottom: 0;
                right: 0;
                left: 50%;
                transform: translate(-50%, -50%);
                position: absolute;
                object-fit: contain;
            }

            .cloud-wrapper {
                /* max-height: 150px; */
                /* transition: max-height 0.4s ease; */
                overflow: hidden;
            }

            .map-side-panel__footer {
                padding-top: 16px;
                padding-bottom: 24px;
                border-top: 1px solid #D6D6D6;

                display: flex;
                align-items: center;
                justify-content: center;
                gap: 16px;

                font-weight: 400;
                font-size: 12px;
                line-height: 18px;
            }

            @keyframes fadein {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            .service-item img {
                width: 100%;
                height: 100%;
                object-fit: contain;
            }

            #telco-block {
                background-color: white;
                position: relative;
                z-index: 3;
                padding-top: 20px;
            }

            #telco-separator,
            #telco-separator2 {
                position: relative;
                background-color: white;
                width: 100%;
                z-index: 2;
            }

            #providers-block,
            #net-fabric-block {
                position: relative;
                background-color: white;
                z-index: 1;
                /* min-height: 200px; */
                min-height: 150px;
                padding-bottom: 8px;
            }

            #net-fabric-block {
                min-height: 50px;
            }

            #providers-block[placeholder="on"] #providers-block-content {
                opacity: 0;
            }

            #net-fabric-block[placeholder="on"] #net-fabric-block-content {
                opacity: 0;
            }

            #providers-block-content,
            #net-fabric-block-content {
                background-color: white;
                position: relative;
                z-index: 2;
                /* min-height: 200px; */
                min-height: 150px;
                transition: opacity ease 200ms;
            }

            #net-fabric-block-content {
                min-height: 40px;
            }

            #providers-block-placeholder,
            #net-fabric-block-placeholder {
                position: absolute;
                text-align: center;
                top: 20px;
                width: 100%;
            }

            #map-controls-holder {
                position: absolute;
                display: flex;
                justify-content: end;
                bottom: 0;
                transform: translateY(-88px);
                transition: transform 0.3s ease-out;
            }

            #map-controls-holder.notification-active {
                transform: translateY(-128px);
            }

            .map-controls-wrapper {
                width: auto;
                display: flex;
                position: absolute;
                bottom: 0;
                top: auto;
                z-index: 2;
                flex-direction: column;
                margin-bottom: 10px;
                border-radius: 6px;
                overflow: hidden;
            }

            .map-control-zoom-btn {
                width: 30px;
                height: 30px;
                border: none;
                background-color: #ffffff;
                background-repeat: no-repeat;
                background-position: 50%;
                background-size: 10px;
                cursor: pointer;
                opacity: 0.7;
                transition: opacity 0.2s ease-out, background-color 0.1s ease;
            }

            .map-control-zoom-btn:hover {
                opacity: 1;
            }

            .map-control-zoom-btn:active {
                background-color: #dadada;
            }

            #map-btn-zoom-in {
                background-image: url("https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/plus.png");
            }

            #map-btn-zoom-out {
                background-image: url("https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/minus.png");
            }

            #map-btn-zoom-reset {
                border-top: 2px #dadada solid;
                background-size: 15px;
                background-image: url("https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/reset.png");
            }

            @media screen and (max-width: 1024px) {
                #map-side-panel {}

                #map-side-panel h2 {
                    font-size: 18px;
                }

                #map-ping-content {
                    font-weight: 600;
                    font-size: 14px;
                    line-height: 14px;
                    padding: 8px 12px 6px 12px;
                }

                #map-ping-panel-ping-holder {
                    margin: 0px 12px;
                    font-size: 12px;
                    line-height: 12px;
                }

                #map-element {}

                #map-element-holder {}

                #map-container {
                    height: calc(100vh - 50px);
                }
            }


            @media screen and (max-width: 991px) {
                .container {
                    padding-right: 31px;
                    padding-left: 31px;
                }

                #map-link-panel {
                    display: none;
                }

                #map-element svg {
                    height: 90%;
                    max-height: 850px;
                }

                .carriers-nav-btn {
                    display: none;
                }

                .map-side-panel__msp-wrapper {
                    justify-content: start;
                }

                .service-item {
                    box-sizing: border-box;
                    border: none;
                    border: 2px solid transparent;
                    flex: 0 0 30%;
                    padding-left: 1px;
                    padding-right: 1px;
                    background: #FFFFFF;
                    transition: box-shadow 0.2s ease-out, border-color 0.2s ease-out;
                    overflow: hidden;
                }

                .msp-provider {
                    box-sizing: border-box;
                    border: none;
                    flex: 0 0 30%;
                    padding-left: 1px;
                    padding-right: 1px;
                    background: #FFFFFF;
                    transition: box-shadow 0.2s ease-out;
                    overflow: hidden;
                }

                .map-side-panel__msp-wrapper>.cloud-provider:first-child {
                    margin-left: auto;
                }

                .map-side-panel__msp-wrapper>.cloud-provider:last-child {
                    margin-right: auto;
                }

                .map-side-panel__cloud-wrapper {
                    border-top: none;
                }

                .map-side-panel__cloud-wrapper>p:first-child {
                    margin-top: 0;
                }

                #map-controls-holder {
                    display: none;
                }
            }

            @media screen and (max-width: 767px) {
                .container {
                    padding-right: 5.33vw;
                    padding-left: 5.33vw;
                }

                #map-side-panel.notification-active {
                    transform: translateY(-100%);
                }

                #map-panel-a-notification {
                    height: auto;
                    max-height: 60px;
                }

                #map-panel-a-notification h1 {
                    padding-top: 10px;
                    font-size: 14px;
                    line-height: 18px;
                }

                #map-side-panel-overlay {
                    position: absolute;
                    left: 0;
                    right: 0;
                    top: 0;
                    bottom: 0;
                    background-color: #000000;
                    z-index: 1;
                    opacity: 0;
                    visibility: hidden;
                    display: block;
                    transition: opacity 0.3s ease-out, visibility 0.3s;
                }

                #map-element-label {
                    font-size: 12px;
                    line-height: 18px;
                }

                #map-side-panel-disclaimer {
                    display: none;
                }

                .label-marker {
                    width: 16px;
                    height: 16px;
                }

                .label-seperator {
                    margin: 0 8px;
                }

                .m-hide {
                    display: none;
                }

                #city-selection-container {
                    flex-direction: column;
                    gap: 8px;
                }

                #map-side-panel {
                    transform: translateY(-100%);
                }

                .map-side-panel__network-container {
                    flex-direction: column;
                }

                .map-legend-section {
                    flex-wrap: wrap;
                }

                #map-side-panel-b {
                    max-height: 0vh;
                    overflow-y: auto;
                }

                #map-side-panel__network-seperator {
                    display: block;
                    height: 1px;
                    background-color: #D6D6D6;
                    margin: 0 -5.33vw 0 -5.33vw;
                }
            }

            @media screen and (max-width: 478px) {}
        </style>
        <div id="map-container">
            <div id="map-wrapper">
                <div id="map-side-panel-overlay" onclick="expandMenu()"></div>
                <div id="map-element-holder">
                    <div id="map-element">
                        <script>

                            var handleMapClick = (event) => {
                                if (selectEnd.value) {
                                    selectEnd.value = '';
                                    closeDestination();
                                } else if (selectStart.value) {
                                    selectStart.value = '';
                                    closeSelection();
                                }
                            }

                            var initialCityOptions;

                            var handleCityClick = (event) => {
                                event.stopPropagation();
                                event.preventDefault();
                                event.stopImmediatePropagation();

                                if (!initialCityOptions) {
                                    initialCityOptions = [...document.querySelectorAll("#city-select-start>select>option:not([value=''])")].map(node => node.getAttribute("value"))
                                }

                                if (selectStart.value === '') {
                                    // no cities selected initially

                                    // if city not in whitelist
                                    if (!initialCityOptions.includes(event.currentTarget.id)) {
                                        return;
                                    }

                                    if (selectStart.value === event.currentTarget.id) {
                                        selectStart.value = '';
                                        closeSelection();
                                    } else {
                                        selectStart.value = event.currentTarget.id;
                                        showSelection(event.currentTarget.id);
                                    }
                                } else {
                                    // initial city selected

                                    if (selectStart.value === event.currentTarget.id) {
                                        selectStart.value = '';
                                        closeSelection();
                                    } else {
                                        selectEnd.value = event.currentTarget.id;
                                        selectDestination(event.currentTarget.id);
                                    }
                                }
                            }
                        </script>
                        <embed src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/Map.svg"
                            alt="Map of Australia" id="map-img"></embed>
                        <svg xmlns="http://www.w3.org/2000/svg" id="map-svg" viewBox="0 0 1440 784" fill="none">
                            <style>
                                g[city-pins], g[city-lines] {
                                    transform: translateY(69px);
                                }

                                [city-lines] path {
                                    pointer-events: none;
                                    stroke: #2b4a71;
                                    transition: all 0.2s ease-out;
                                }

                                [city-lines] path[passthrough] {
                                    opacity: 0;
                                }

                                [city-lines] path[on] {
                                    opacity: 1;
                                }

                                [city-lines] path[on][selected] {
                                    stroke-dasharray: 1200;
                                    stroke-dashoffset: 1200;
                                    stroke: #001F5C;
                                    animation: dash 2000ms linear forwards;
                                    opacity: 1;
                                }

                                @keyframes dash {
                                    to {
                                        stroke-dashoffset: 0;
                                    }
                                }

                                .city-group {
                                    opacity: 1;
                                    transition: opacity 200ms ease;
                                    pointer-events: none;
                                }

                                .city-group#equinixSydney,
                                .city-group#nextDcBrisbane {
                                    pointer-events: all;
                                }

                                .city-group[on] {
                                    opacity: 1;
                                    cursor: pointer;
                                    pointer-events: all;
                                }

                                .city-group [pulse] {
                                    opacity: 0;
                                }

                                .city-group[dc] {
                                    opacity: 1;
                                    cursor: pointer;
                                    pointer-events: all;
                                }

                                .city-group[dc][on] [pulse] {
                                    opacity: 1;
                                }

                                .city-group ellipse[identifier] {
                                    fill: #34C759;
                                }

                                .city-group[dc][on] ellipse[identifier] {
                                    fill: #001F5C;
                                }

                                .city-group[soon] ellipse[identifier] {
                                    fill: #7caec1;
                                }

                                .city-group[inprogress] ellipse[identifier] {
                                    fill: #FF9500;
                                }

                                [city-lines] path[invisible] {
                                    opacity: 0;
                                    stroke: transparent;
                                }

                                .city-name {
                                    font: Metropolis, sans-serif;
                                    font-weight: 400;
                                    font-size: 9px;
                                    line-height: 14px;
                                    fill: #00005C;
                                }
                            </style>
                            <g city-lines>
                                <!-- NEW LINE HELPER -->
                                <circle left-node cx="0" cy="0" r="2" fill="green" />
                                <circle right-node cx="0" cy="0" r="2" fill="green" />

                                <path stroke-dasharray="10, 5" dc="albury" city="shepparton"
                                    d="M830.58 565C820.91 569 811.25 573 801.58,577" />
                                <path stroke-dasharray="10, 5" dc="ballarat" city="geelong"
                                    d="M760.58 606C765.91 613 771.25 620 776.58,627" />
                                <path stroke-dasharray="10, 5" dc="bendigo" city="nextDcMelbourne"
                                    d="M775.58 591C781.25 601 786.91 611 792.58,621" />
                                <path stroke-dasharray="10, 5" dc="dubbo" city="wagga"
                                    d="M867.58,469 C865.66,494.05 858.95,520.25 847.58,538" />
                                <path stroke-dasharray="10, 5" dc="nextDcMelbourne" city="geelong"
                                    d="M792.58 621C787.25 623 781.91 625 776.58,627" />
                                <path stroke-dasharray="10, 5" dc="coffsHarbour" city="newcastle"
                                    d="M973,420.4 C957.87,438.12 947.88,462.93 942,488.4" />
                                <path dc="tamworth" city="newcastle"
                                    d="M924.58,438 C933.89,456.1 939.64,471 942,488.4" />
                                <path dc="newcastle" city="equinixSydney"
                                    d="M942 488.4C937.33 496.73 932.67 505.07 928,513.4" />
                                <path dc="nextDcSydney" city="equinixSydney"
                                    d="M915 524.4C919.33 520.73 923.67 517.07 928,513.4" />
                                <path stroke-dasharray="10, 5" dc="nextDcSydney" city="wagga"
                                    d="M915,524.4 C898.88,523.13 864.75,527.47 847.58,538" />
                                <path stroke-dasharray="10, 5" dc="cairns" city="townsville"
                                    d="M811.58,91 C814.57,116.57 816.92,130.08 838.56,144" />
                                <path stroke-dasharray="10, 5" dc="townsville" city="mackay"
                                    d="M838.56,144 C860.72,159.3 874.17,173.65 886.58,189" />
                                <path stroke-dasharray="10, 5" dc="mackay" city="rockhampton"
                                    d="M886.58,189 C885.76,213 900.05,229.4 914.58,240" />
                                <path stroke-dasharray="10, 5" dc="rockhampton" city="gladstone"
                                    d="M914.58 240C921.25 243.67 927.91 247.33 934.58,251 " />
                                <path stroke-dasharray="10, 5" dc="gladstone" city="bundaberg"
                                    d="M934.58,251 C943.71,260.35 952.25,267.25 956.58,275" />
                                <path stroke-dasharray="10, 5" dc="bundaberg" city="nextDcBrisbane"
                                    d="M956.58,275 C946.26,300.22 946.05,332.08 957.58,355" />

                                <path dc="albury" city="nextDcMelbourne"
                                    d="M830.58,565 C825.41,590.87 809.45,611.48 792.58,621" />
                                <path dc="albury" city="equinixSydney"
                                    d="M830.58,565 C872,564.2 908.78,550.75 928,513.4" />
                                <path dc="equinixSydney" city="tamworth"
                                    d="M928,513.4 C914.16,495.12 912.02,463.63 924.58,438" />
                                <path stroke-dasharray="10, 5" dc="bathurst" city="nextDcSydney"
                                    d="M895.58 494C902.05 504.13 908.53 514.27 915,524.4" />
                                <path dc="nextDcBrisbane" city="dubbo"
                                    d="M957.58,355 C915.63,378.45 877.18,417.75 867.58,469" />

                                <path stroke-dasharray="10, 5" dc="mildura" city="adelaide"
                                    d="M729.58,519 C703.1,515.25 672.11,520.6 650.58,534" />
                                <path stroke-dasharray="10, 5" dc="adelaide" city="horsham"
                                    d="M650.58,534 C680.61,565.52 698.1,575.08 729.58,587" />
                                <path stroke-dasharray="10, 5" dc="nextDcBrisbane" city="coffsHarbour"
                                    d="M957.58,355 C969.22,376.5 976.51,399.25 973,420.4" />
                                <path stroke-dasharray="10, 5" dc="coffsHarbour" city="tamworth"
                                    d="M973,420.4 C957.66,422.32 938.67,430.13 924.58,438" />
                                <path stroke-dasharray="10, 5" dc="dubbo" city="bathurst"
                                    d="M867.58,469 C881.26,474.88 889.35,484.52 895.58,494" />
                                <path stroke-dasharray="10, 5" dc="wagga" city="albury"
                                    d="M847.58 538C841.91 547 836.25 556 830.58,565" />
                                <path stroke-dasharray="10, 5" dc="mildura" city="shepparton"
                                    d="M729.58,519 C780.03,539.63 792.28,558.12 801.58,577" />
                                <path stroke-dasharray="10, 5" dc="shepparton" city="bendigo"
                                    d="M801.58 577C792.91 581.67 784.25 586.33 775.58,591" />
                                <path stroke-dasharray="10, 5" dc="horsham" city="ballarat"
                                    d="M729.58,587 C739.71,598.73 749.85,601.72 760.58,606" />
                                <path stroke-dasharray="10, 5" dc="traralgon" city="nextDcMelbourne"
                                    d="M814.58 626C807.25 624.33 799.91 622.67 792.58,621" />
                                <path dc="equinixSydney" city="dubbo"
                                    d="M928,513.4 C913.01,490.4 893.57,476.7 867.58,469" />
                                <path stroke-dasharray="10, 5" dc="equinixSydney" city="nextDcMelbourne"
                                    d="M928,513.4 C932.86,582.57 842.32,605.13 792.58,621" />
                                <path stroke-dasharray="10, 5" dc="ballarat" city="nextDcMelbourne"
                                    d="M760.58 606C771.25 611 781.91 616 792.58,621" />

                                <path dc="newcastle" city="nextDcSydney" passthrough
                                    d="M942,488.4 C937.33,496.73 932.67,505.07 928,513.4 923.67,517.07 919.33,520.73 915,524.4" />
                                <path dc="tamworth" city="nextDcSydney" passthrough
                                    d="M924.58,438 C912.02,463.63 914.16,495.12 928,513.4 923.67,517.07 919.33,520.73 915,524.4" />
                                <path dc="dubbo" city="nextDcSydney" passthrough
                                    d="M867.58,469 C893.57,476.7 913.01,490.4 928,513.4 923.67,517.07 919.33,520.73 915,524.4" />
                                <path dc="newcastle" city="dubbo" passthrough
                                    d="M867.58,469 C893.57,476.7 913.01,490.4 928,513.4 932.67,505.07 937.33,496.73 942,488.4" />
                                <path dc="newcastle" city="albury" passthrough
                                    d="M942 488.4C937.33 496.73 932.67 505.07 928,513.4 908.78,550.75 872,564.2 830.58,565" />
                                <path dc="dubbo" city="albury" passthrough
                                    d="M867.58,469 C893.57,476.7 913.01,490.4 928,513.4 908.78,550.75 872,564.2 830.58,565" />
                                <path dc="tamworth" city="albury" passthrough
                                    d="M924.58,438 C912.02,463.63 914.16,495.12 928,513.4 908.78,550.75 872,564.2 830.58,565" />
                                <path dc="nextDcSydney" city="albury" passthrough
                                    d="M915 524.4C919.33 520.73 923.67 517.07 928,513.4 908.78,550.75 872,564.2 830.58,565" />
                                <path dc="tamworth" city="dubbo" passthrough
                                    d="M924.58,438 C912.02,463.63 914.16,495.12 928,513.4 913.01,490.4 893.57,476.7 867.58,469" />

                                <path dc="newcastle" city="nextDcBrisbane" passthrough
                                    d="M957.58,355 C915.63,378.45 877.18,417.75 867.58,469 893.57,476.7 913.01,490.4 928,513.4 932.67,505.07 937.33,496.73 942,488.4" />
                                <path dc="newcastle" city="nextDcMelbourne" passthrough
                                    d="M942,488.4 C937.33,496.73 932.67,505.07 928,513.4 908.78,550.75 872,564.2 830.58,565 825.41,590.87 809.45,611.48 792.58,621" />
                                <path dc="tamworth" city="nextDcBrisbane" passthrough
                                    d="M957.58,355 C915.63,378.45 877.18,417.75 867.58,469 893.57,476.7 913.01,490.4 928,513.4 914.16,495.12 912.02,463.63 924.58,438" />
                                <path dc="tamworth" city="nextDcMelbourne" passthrough
                                    d="M924.58,438 C912.02,463.63 914.16,495.12 928,513.4 908.78,550.75 872,564.2 830.58,565 825.41,590.87 809.45,611.48 792.58,621" />
                                <path dc="dubbo" city="nextDcMelbourne" passthrough
                                    d="M867.58,469 C893.57,476.7 913.01,490.4 928,513.4 908.78,550.75 872,564.2 830.58,565 825.41,590.87 809.45,611.48 792.58,621" />
                                <path dc="albury" city="nextDcBrisbane" passthrough
                                    d="M957.58,355 C915.63,378.45 877.18,417.75 867.58,469 893.57,476.7 913.01,490.4 928,513.4 908.78,550.75 872,564.2 830.58,565" />

                            </g>

                            <g city-pins>

                                <g id="cairns" class="city-group" soon>

                                    <ellipse cx="811.58" cy="91" rx="7" ry="7" fill="white" />
                                    <ellipse cx="811.58" cy="91" rx="5" ry="5" identifier />
                                    <text x="797.13" y="105" class="city-name">Cairns</text>
                                </g>

                                <g id="townsville" class="city-group" soon>

                                    <ellipse cx="838.56" cy="144" rx="7" ry="7" fill="white" />
                                    <ellipse cx="838.56" cy="144" rx="5" ry="5" identifier />
                                    <text x="815.2099999999999" y="158" class="city-name">Townsville</text>
                                </g>

                                <g id="mackay" class="city-group" soon>

                                    <ellipse cx="886.58" cy="189" rx="7" ry="7" fill="white" />
                                    <ellipse cx="886.58" cy="189" rx="5" ry="5" identifier />
                                    <text x="869.33" y="203" class="city-name">Mackay</text>
                                </g>

                                <g id="rockhampton" class="city-group" soon>

                                    <ellipse cx="914.58" cy="240" rx="7" ry="7" fill="white" />
                                    <ellipse cx="914.58" cy="240" rx="5" ry="5" identifier />
                                    <text x="923.58" y="243" class="city-name">Rockhampton</text>
                                </g>

                                <g id="gladstone" class="city-group" soon>

                                    <ellipse cx="934.58" cy="251" rx="7" ry="7" fill="white" />
                                    <ellipse cx="934.58" cy="251" rx="5" ry="5" identifier />
                                    <text x="943.58" y="254" class="city-name">Gladstone</text>
                                </g>

                                <g id="bundaberg" class="city-group" inprogress>

                                    <ellipse cx="956.58" cy="275" rx="7" ry="7" fill="white" />
                                    <ellipse cx="956.58" cy="275" rx="5" ry="5" identifier />
                                    <text x="965.58" y="278" class="city-name">Bundaberg</text>
                                </g>

                                <g id="nextDcBrisbane" class="city-group" dc onclick="handleCityClick(event)">
                                    <ellipse pulse cx="957.58" cy="355" rx="16" ry="16" fill="url('#pulseFill')"
                                        restart="always">
                                        <animate attributeName="rx" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                        <animate attributeName="ry" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                    </ellipse>
                                    <ellipse cx="957.58" cy="355" rx="7" ry="7" fill="white" />
                                    <ellipse cx="957.58" cy="355" rx="5" ry="5" identifier />
                                    <text x="966.58" y="358" class="city-name">NextDC Brisbane</text>
                                </g>

                                <g id="coffsHarbour" class="city-group" inprogress>

                                    <ellipse cx="973" cy="420.4" rx="7" ry="7" fill="white" />
                                    <ellipse cx="973" cy="420.4" rx="5" ry="5" identifier />
                                    <text x="982" y="423.4" class="city-name">Coffs Harbour</text>
                                </g>

                                <g id="tamworth" class="city-group" dc onclick="handleCityClick(event)">
                                    <ellipse pulse cx="924.58" cy="438" rx="16" ry="16" fill="url('#pulseFill')"
                                        restart="always">
                                        <animate attributeName="rx" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                        <animate attributeName="ry" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                    </ellipse>
                                    <ellipse cx="924.58" cy="438" rx="7" ry="7" fill="white" />
                                    <ellipse cx="924.58" cy="438" rx="5" ry="5" identifier />
                                    <text x="902.33" y="452" class="city-name">Tamworth</text>
                                </g>

                                <g id="newcastle" class="city-group" dc onclick="handleCityClick(event)">
                                    <ellipse pulse cx="942" cy="488.4" rx="16" ry="16" fill="url('#pulseFill')"
                                        restart="always">
                                        <animate attributeName="rx" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                        <animate attributeName="ry" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                    </ellipse>
                                    <ellipse cx="942" cy="488.4" rx="7" ry="7" fill="white" />
                                    <ellipse cx="942" cy="488.4" rx="5" ry="5" identifier />
                                    <text x="951" y="491.4" class="city-name">Newcastle</text>
                                </g>

                                <g id="dubbo" class="city-group" dc onclick="handleCityClick(event)">
                                    <ellipse pulse cx="867.58" cy="469" rx="16" ry="16" fill="url('#pulseFill')"
                                        restart="always">
                                        <animate attributeName="rx" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                        <animate attributeName="ry" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                    </ellipse>
                                    <ellipse cx="867.58" cy="469" rx="7" ry="7" fill="white" />
                                    <ellipse cx="867.58" cy="469" rx="5" ry="5" identifier />
                                    <text x="852.7800000000001" y="483" class="city-name">Dubbo</text>
                                </g>

                                <g id="bathurst" class="city-group" inprogress>

                                    <ellipse cx="895.58" cy="494" rx="7" ry="7" fill="white" />
                                    <ellipse cx="895.58" cy="494" rx="5" ry="5" identifier />
                                    <text x="876.88" y="508" class="city-name">Bathurst</text>
                                </g>

                                <g id="nextDcSydney" class="city-group" dc onclick="handleCityClick(event)">
                                    <ellipse pulse cx="915" cy="524.4" rx="16" ry="16" fill="url('#pulseFill')"
                                        restart="always">
                                        <animate attributeName="rx" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                        <animate attributeName="ry" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                    </ellipse>
                                    <ellipse cx="915" cy="524.4" rx="7" ry="7" fill="white" />
                                    <ellipse cx="915" cy="524.4" rx="5" ry="5" identifier />
                                    <text x="924" y="527.4" class="city-name">NextDC Sydney</text>
                                </g>

                                <g id="equinixSydney" class="city-group" dc onclick="handleCityClick(event)">
                                    <ellipse pulse cx="928" cy="513.4" rx="16" ry="16" fill="url('#pulseFill')"
                                        restart="always">
                                        <animate attributeName="rx" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                        <animate attributeName="ry" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                    </ellipse>
                                    <ellipse cx="928" cy="513.4" rx="7" ry="7" fill="white" />
                                    <ellipse cx="928" cy="513.4" rx="5" ry="5" identifier />
                                    <text x="937" y="516.4" class="city-name">Equinix Sydney</text>
                                </g>

                                <g id="nowra" class="city-group" soon>

                                    <ellipse cx="916" cy="542.4" rx="7" ry="7" fill="white" />
                                    <ellipse cx="916" cy="542.4" rx="5" ry="5" identifier />
                                    <text x="925" y="545.4" class="city-name">Nowra</text>
                                </g>

                                <g id="wagga" class="city-group" inprogress>

                                    <ellipse cx="847.58" cy="538" rx="7" ry="7" fill="white" />
                                    <ellipse cx="847.58" cy="538" rx="5" ry="5" identifier />
                                    <text x="813.6800000000001" y="552" class="city-name">Wagga Wagga</text>
                                </g>

                                <g id="albury" class="city-group" dc onclick="handleCityClick(event)">
                                    <ellipse pulse cx="830.58" cy="565" rx="16" ry="16" fill="url('#pulseFill')"
                                        restart="always">
                                        <animate attributeName="rx" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                        <animate attributeName="ry" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                    </ellipse>
                                    <ellipse cx="830.58" cy="565" rx="7" ry="7" fill="white" />
                                    <ellipse cx="830.58" cy="565" rx="5" ry="5" identifier />
                                    <text x="816.38" y="579" class="city-name">Albury</text>
                                </g>

                                <g id="mildura" class="city-group" inprogress>

                                    <ellipse cx="729.58" cy="519" rx="7" ry="7" fill="white" />
                                    <ellipse cx="729.58" cy="519" rx="5" ry="5" identifier />
                                    <text x="713.1800000000001" y="533" class="city-name">Mildura</text>
                                </g>

                                <g id="shepparton" class="city-group" inprogress>

                                    <ellipse cx="801.58" cy="577" rx="7" ry="7" fill="white" />
                                    <ellipse cx="801.58" cy="577" rx="5" ry="5" identifier />
                                    <text x="765" y="567" class="city-name">Shepparton</text>
                                </g>

                                <g id="traralgon" class="city-group" inprogress>

                                    <ellipse cx="814.58" cy="626" rx="7" ry="7" fill="white" />
                                    <ellipse cx="814.58" cy="626" rx="5" ry="5" identifier />
                                    <text x="823.58" y="629" class="city-name">Traralgon</text>
                                </g>

                                <g id="bendigo" class="city-group" inprogress>

                                    <ellipse cx="775.58" cy="591" rx="7" ry="7" fill="white" />
                                    <ellipse cx="775.58" cy="591" rx="5" ry="5" identifier />
                                    <text x="752" y="582" class="city-name">Bendigo</text>
                                </g>

                                <g id="nextDcMelbourne" class="city-group" dc onclick="handleCityClick(event)">
                                    <ellipse pulse cx="792.58" cy="621" rx="16" ry="16" fill="url('#pulseFill')"
                                        restart="always">
                                        <animate attributeName="rx" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                        <animate attributeName="ry" values="6.5;16;6.5" dur="1.6s"
                                            repeatCount="indefinite" keyTimes="0;0.5;1"
                                            keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" />
                                    </ellipse>
                                    <ellipse cx="792.58" cy="621" rx="7" ry="7" fill="white" />
                                    <ellipse cx="792.58" cy="621" rx="5" ry="5" identifier />
                                    <text x="770" y="630" class="city-name">
                                        <tspan x="776" dy="1em">NextDC</tspan>
                                        <tspan x="770" dy="1em">Melbourne</tspan>
                                    </text>
                                </g>

                                <g id="adelaide" class="city-group" soon>

                                    <ellipse cx="650.58" cy="534" rx="7" ry="7" fill="white" />
                                    <ellipse cx="650.58" cy="534" rx="5" ry="5" identifier />
                                    <text x="631.0300000000001" y="548" class="city-name">Adelaide</text>
                                </g>

                                <g id="horsham" class="city-group" inprogress>

                                    <ellipse cx="729.58" cy="587" rx="7" ry="7" fill="white" />
                                    <ellipse cx="729.58" cy="587" rx="5" ry="5" identifier />
                                    <text x="709.2800000000001" y="601" class="city-name">Horsham</text>
                                </g>

                                <g id="ballarat" class="city-group" inprogress>

                                    <ellipse cx="760.58" cy="606" rx="7" ry="7" fill="white" />
                                    <ellipse cx="760.58" cy="606" rx="5" ry="5" identifier />
                                    <text x="743.58" y="620" class="city-name">Ballarat</text>
                                </g>

                                <g id="geelong" class="city-group" soon>

                                    <ellipse cx="776.58" cy="627" rx="7" ry="7" fill="white" />
                                    <ellipse cx="776.58" cy="627" rx="5" ry="5" identifier />
                                    <text x="730" y="630" class="city-name">Geelong</text>
                                </g>

                            </g>
                            <defs>
                                <radialGradient id="pulseFill">
                                    <stop offset="0.35" stop-color="#A5FFFF" />
                                    <stop offset="1" stop-color="#A5FFFF" stop-opacity="0" />
                                </radialGradient>
                                <filter id="filter0_d" x="510.803" y="37.9297" width="430.779" height="277.135"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter1_d" x="516.515" y="91.7056" width="436.143" height="155.511"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter2_d" x="515.228" y="73.3335" width="422.953" height="160.121"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter3_d" x="539.166" y="117.454" width="397.846" height="115.501"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter4_d" x="111.88" y="170.611" width="825.97" height="140.106"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter5_d" x="122.943" y="152.314" width="815.744" height="129.37"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter6_d" x="264.449" y="175.621" width="673.876" height="115.687"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter7_d" x="232.294" y="157.289" width="704.4" height="108.924"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter8_d" x="515.241" y="108.346" width="425.844" height="103.305"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter9_d" x="538.645" y="117.315" width="403.723" height="114.947"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter10_d" x="265.582" y="173.838" width="678.119" height="109.241"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter11_d" x="232.864" y="156.566" width="707.969" height="111.952"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter12_d" x="111.977" y="169.628" width="828.747" height="81.3457"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter13_d" x="123.047" y="150.233" width="817.602" height="80.6919"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                                <filter id="filter14_d" x="509.846" y="124.858" width="430.953" height="86.3907"
                                    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                    <feColorMatrix in="SourceAlpha" type="matrix"
                                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                    <feOffset />
                                    <feGaussianBlur stdDeviation="4" />
                                    <feColorMatrix type="matrix"
                                        values="0 0 0 0 0.847059 0 0 0 0 0.917647 0 0 0 0 0.917647 0 0 0 1 0" />
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                                </filter>
                            </defs>
                        </svg>
                        <div id="map-link-panel">
                            <img
                                src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/ConnectCircle.svg"></img>
                            <p id="map-link__city-name">City Name</p>
                            <a href="#" id="map-link__city-link">Learn more</a>
                            <div id="map-link__arrow"></div>
                        </div>
                        <div id="map-ping-panel">
                            <div id="map-ping-content">
                                <div id="map__ping-main">
                                    <svg width="9" height="41" viewBox="0 0 9 41" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="4.5" cy="5" r="1.5" transform="rotate(-180 4.5 5)" fill="#FFFFFF" />
                                        <circle cx="4.5" cy="5" r="4" transform="rotate(-180 4.5 5)" stroke="#FFFFFF" />
                                        <circle cx="4.5" cy="36" r="1.5" transform="rotate(-180 4.5 36)"
                                            fill="#FFFFFF" />
                                        <circle cx="4.5" cy="36" r="4" transform="rotate(-180 4.5 36)"
                                            stroke="#FFFFFF" />
                                        <line x1="4.5" y1="8.5" x2="4.5" y2="31.5" stroke="#FFFFFF" />
                                    </svg>
                                    <div id="map__ping-city-wrapper">
                                        <div class="map__ping-city">
                                            <div city-label="dc"></div>
                                            <a class="map__ping-city-link" href="#">Learn more</a>
                                        </div>
                                        <div class="map__ping-city">
                                            <div city-label="destination"></div>
                                            <a class="map__ping-city-link" href="#">Learn more</a>
                                        </div>
                                    </div>
                                </div>
                                <div id="map__ping-foot">
                                    <p>Latency*</p>
                                    <div id="map-ping-panel-ping"></div>
                                </div>
                                <div id="map-ping-panel-ping-holder">
                                </div>
                                <div id="map-ping-button"></div>
                            </div>
                        </div>
                    </div>
                    <div id=map-element-label>
                        <div class="map-legend-section">
                            <div class="map-legend-part m-hide">
                                <p class="m-hide">Explore Our Network</p>
                            </div>
                            <div class="map-legend-part">
                                <div class="label-marker" style="background-color: #34C759;"></div>
                                <p>Live</p>
                            </div>
                            <div class="map-legend-part">
                                <div class="label-marker" style="background-color: #FF9500;"></div>
                                <p>In Progress</p>
                            </div>
                            <div class="map-legend-part">
                                <div class="label-marker" style="background-color: #7caec1;"></div>
                                <p>Coming Soon</p>
                            </div>
                            <div class="map-legend-part">
                                <div class="label-line" style="background-color: #2b4a71;"></div>
                                <p>Live</p>
                            </div>
                            <div class="map-legend-part">
                                <div class="label-line"
                                    style="background: linear-gradient(90deg, rgba(43,74,113,1) 35%, rgba(255,255,255,1) 36%, rgba(255,255,255,1) 64%, rgba(43,74,113,1) 65%);">
                                </div>
                                <p>Coming Soon</p>
                            </div>
                        </div>
                    </div>
                    <div id="map-controls-holder" class="container notification-active">
                        <div class="map-controls-wrapper">
                            <button class="map-control-zoom-btn" id="map-btn-zoom-in"></button>
                            <button class="map-control-zoom-btn" id="map-btn-zoom-out"></button>
                            <button class="map-control-zoom-btn" id="map-btn-zoom-reset"></button>
                        </div>
                    </div>
                </div>
                <div id="map-side-panel" class="notification-active">
                    <div id="map-side-panel-a">
                        <button id="city-selection-expand" onclick="expandMenu()">
                            <div class="expand-icon"></div>
                        </button>
                        <div id="map-panel-a-notification" class="container">
                            <h1>Select Two Data Centres to View Location Information</h1>
                        </div>
                        <div id="city-selection-container" class="container">
                            <div id="city-select-start" class="city-select">
                                <select>
                                    <option value="">Select Data Centre</option>
                                    <option value="newcastle">Newcastle</option>
                                    <option value="tamworth">Tamworth</option>
                                    <option value="dubbo">Dubbo</option>
                                    <option value="albury">Albury</option>
                                </select>
                            </div>
                            <div id="city-select-end" class="city-select" disabled>
                                <select disabled>
                                    <option value="">Select Data Centre</option>
                                    <option value="newcastle">Newcastle</option>
                                    <option value="tamworth">Tamworth</option>
                                    <option value="dubbo">Dubbo</option>
                                    <option value="albury">Albury</option>
                                    <option value="equinixSydney">Equinix Sydney</option>
                                    <option value="nextDcSydney">NextDC Sydney</option>
                                    <option value="nextDcBrisbane">NextDC Brisbane</option>
                                    <option value="nextDcMelbourne">NextDC Melbourne</option>
                                </select>
                            </div>
                        </div>
                        <!-- <div id="city-destination-details" off>
                                <div class="city-select-mini-label">Ping/latency</div>
                                <div id="ping-display">158ms</div>
                            </div> -->
                    </div>
                    <div id="map-side-panel-b">
                        <div class="map-side-panel__network-container container">
                            <div class="map-side-panel__network-wrapper">
                                <p>Carriers/Network Aggregators</p>
                                <div class="map-side-panel__network-top">
                                    <button class="carriers-nav-btn left"></button>
                                    <button class="carriers-nav-btn right"></button>
                                    <div class="map-side-panel__carriers-wrapper">
                                        <button class="service-item" carrier="ledc" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/ledc.svg"
                                                    loading="lazy" alt="ledc">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="vocus" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/Vocus.svg"
                                                    loading="lazy" alt="vocus">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="encoo" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/encoo.png"
                                                    loading="lazy" alt="encoo">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="transgrid" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/transgrid.png"
                                                    loading="lazy" alt="transgrid">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="vergetel" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/vergetel.png"
                                                    loading="lazy" alt="vergetel">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="tpg" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/tpg.png"
                                                    loading="lazy" alt="tpg">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="superloop" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/superloop.svg"
                                                    loading="lazy" alt="superloop">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="swoop" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/swoop.svg"
                                                    loading="lazy" alt="swoop">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="nexon" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/nexon.png"
                                                    loading="lazy" alt="nexon">
                                            </div>
                                        </button>
                                    </div>
                                </div>
                                <div class="map-side-panel__network-bot">
                                    <div class="map-side-panel__cloud-wrapper">
                                        <p>MSP Providers </p>
                                        <div class="map-side-panel__msp-wrapper msp-wrapper">
                                            <div class="msp-provider" provider="regionalIt">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/regionalIt.png"
                                                        loading="lazy" alt="regionalIt">
                                                </div>
                                            </div>
                                            <div class="msp-provider" provider="toim">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/toim.svg"
                                                        loading="lazy" alt="toim">
                                                </div>
                                            </div>
                                            <div class="msp-provider" provider="newcastleConnect">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/newcastleConnect.png"
                                                        loading="lazy" alt="newcastleConnect">
                                                </div>
                                            </div>
                                            <div class="msp-provider" provider="sabervox">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/sabervox.png"
                                                        loading="lazy" alt="sabervox">
                                                </div>
                                            </div>
                                            <div class="msp-provider" provider="tamworthBroadcast">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/tamworthBroadcast.png"
                                                        loading="lazy" alt="tamworthBroadcast">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="cloud-wrapper">
                                            <p>Public Cloud Access</p>
                                            <div class="map-side-panel__msp-wrapper">
                                                <div class="msp-provider cloud-provider" cloud="azure">
                                                    <div>
                                                        <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/azure.png"
                                                            loading="lazy" alt="azure">
                                                    </div>
                                                </div>
                                                <div class="msp-provider cloud-provider" cloud="google">
                                                    <div>
                                                        <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/google.png"
                                                            loading="lazy" alt="google">
                                                    </div>
                                                </div>
                                                <div class="msp-provider cloud-provider" cloud="aws">
                                                    <div>
                                                        <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/aws.png"
                                                            loading="lazy" alt="aws">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="map-side-panel__footer" href="#">
                                        <a class="button button-primary bg-primary-2" href="/locations">
                                            Select a city
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div id="map-side-panel__network-seperator"></div>
                            <div class="map-side-panel__network-wrapper">
                                <p>Carriers/Network Aggregators</p>
                                <div class="map-side-panel__network-top">
                                    <button class="carriers-nav-btn left"></button>
                                    <button class="carriers-nav-btn right"></button>
                                    <div class="map-side-panel__carriers-wrapper">
                                        <button class="service-item" carrier="ledc" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/ledc.svg"
                                                    loading="lazy" alt="ledc">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="vocus" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/Vocus.svg"
                                                    loading="lazy" alt="vocus">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="encoo" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/encoo.png"
                                                    loading="lazy" alt="encoo">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="transgrid" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/transgrid.png"
                                                    loading="lazy" alt="transgrid">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="vergetel" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/vergetel.png"
                                                    loading="lazy" alt="vergetel">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="tpg" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/tpg.png"
                                                    loading="lazy" alt="tpg">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="superloop" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/superloop.svg"
                                                    loading="lazy" alt="superloop">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="swoop" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/swoop.svg"
                                                    loading="lazy" alt="swoop">
                                            </div>
                                        </button>
                                        <button class="service-item" carrier="nexon" href="#">
                                            <div>
                                                <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/nexon.png"
                                                    loading="lazy" alt="nexon">
                                            </div>
                                        </button>
                                    </div>
                                </div>
                                <div class="map-side-panel__network-bot">
                                    <div class="map-side-panel__cloud-wrapper">
                                        <p>MSP Providers </p>
                                        <div class="map-side-panel__msp-wrapper msp-wrapper">
                                            <div class="msp-provider" provider="regionalIt">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/regionalIt.png"
                                                        loading="lazy" alt="regionalIt">
                                                </div>
                                            </div>
                                            <div class="msp-provider" provider="toim">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/toim.svg"
                                                        loading="lazy" alt="toim">
                                                </div>
                                            </div>
                                            <div class="msp-provider" provider="newcastleConnect">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/newcastleConnect.png"
                                                        loading="lazy" alt="newcastleConnect">
                                                </div>
                                            </div>
                                            <div class="msp-provider" provider="sabervox">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/sabervox.png"
                                                        loading="lazy" alt="sabervox">
                                                </div>
                                            </div>
                                            <div class="msp-provider" provider="tamworthBroadcast">
                                                <div>
                                                    <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/tamworthBroadcast.png"
                                                        loading="lazy" alt="tamworthBroadcast">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="cloud-wrapper">
                                            <p>Public Cloud Access</p>
                                            <div class="map-side-panel__msp-wrapper">
                                                <div class="msp-provider cloud-provider" cloud="azure">
                                                    <div>
                                                        <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/azure.png"
                                                            loading="lazy" alt="azure">
                                                    </div>
                                                </div>
                                                <div class="msp-provider cloud-provider" cloud="google">
                                                    <div>
                                                        <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/google.png"
                                                            loading="lazy" alt="google">
                                                    </div>
                                                </div>
                                                <div class="msp-provider cloud-provider" cloud="aws">
                                                    <div>
                                                        <img src="https://www.leadingedgedc.com/wp-content/themes/twentytwentyone/assets/images/providers/aws.png"
                                                            loading="lazy" alt="aws">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="map-side-panel__footer">
                                        <a class="button button-primary bg-primary-2" href="#">
                                            Select a city
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="map-side-panel-disclaimer" class="container">
                        <p>
                            *For up to date latency and path information, please fill out the contact form
                            <span><a href="/contact-us">located here</a></span>.
                        </p>
                        <p>^ Approximate Round Trip Time (RTT)</p>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var alphabetArray = " 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ|()".split("");

            async function changeText(el, newText) {
                if (el.innerHTML === newText) return;
                const textChangeId = parseInt(el.getAttribute('text-change-id') || 0) + 1;
                el.setAttribute('text-change-id', textChangeId);

                const clear = setInterval(interval, 5);

                function interval() {
                    if (el.getAttribute('text-change-id') != textChangeId || el.innerHTML === newText) {
                        if (el.innerHTML === newText) el.removeAttribute('text-change-id');
                        clearInterval(clear);
                    }
                    const textArr = [];
                    for (let i = 0; i < newText.length; i++) {
                        if (!el.innerHTML[i]) textArr[i] = Math.floor(Math.random() * alphabetArray.length);
                        else if (el.innerHTML[i] === newText[i]) textArr[i] = alphabetArray.indexOf(el
                            .innerHTML[i]);
                        else textArr[i] = alphabetArray.indexOf(el.innerHTML[i]) + (alphabetArray.indexOf(el
                            .innerHTML[i]) < alphabetArray.indexOf(newText[i]) ? 1 : -1);
                    }
                    const newArr = textArr.map(e => alphabetArray[e]);
                    el.innerHTML = newArr.join('');
                }
            }

            async function changePing(el, newPing) {
                if (parseInt(el.innerHTML) === parseInt(newPing)) return;
                const textChangeId = parseInt(el.getAttribute('text-change-id') || 0) + 1;
                el.setAttribute('text-change-id', textChangeId);

                const clear = setInterval(interval, 80);

                function interval() {
                    console.log(newPing)
                    if (newPing === "TBA") {
                        el.innerHTML = 'TBA';
                        clearInterval(clear);
                        return;
                    }
                    if (el.getAttribute('text-change-id') != textChangeId || parseInt(el.innerHTML) ===
                        parseInt(newPing)) {
                        if (parseInt(el.innerHTML) === parseInt(newPing)) el.removeAttribute('text-change-id');
                        clearInterval(clear);
                    }
                    const textArr = [];
                    for (let i = 0; i < newPing.length; i++) {
                        if (isNaN(parseInt(el.innerHTML[i]))) textArr[i] = Math.floor(Math.random() * 10 + 1);
                        else if (el.innerHTML[i] === newPing[i]) textArr[i] = alphabetArray.indexOf(el
                            .innerHTML[i]);
                        else textArr[i] = alphabetArray.indexOf(el.innerHTML[i]) + (alphabetArray.indexOf(el
                            .innerHTML[i]) < alphabetArray.indexOf(newPing[i]) ? 1 : -1);
                    }
                    const newArr = textArr.map(e => alphabetArray[e]);
                    el.innerHTML = newArr.join('') + 'ms^';
                }
            }
        </script>
        <script>
            const vw = Math.max(
                document.documentElement.clientWidth || 0,
                window.innerWidth || 0
            );
            var mapElement = document.getElementById("map-element");
            var sidePanel = document.getElementById("map-side-panel");
            var sidePanelB = document.getElementById("map-side-panel-b");
            var selectStartCont = document.getElementById("city-select-start");
            var selectEndCont = document.getElementById("city-select-end");
            var selectStart = selectStartCont.querySelector("select");
            var selectEnd = selectEndCont.querySelector("select");
            var carrierWrapperLeft = document
                .getElementsByClassName("map-side-panel__carriers-wrapper")
                .item(0);
            var carrierWrapperRight = document
                .getElementsByClassName("map-side-panel__carriers-wrapper")
                .item(1);
            var networkWrapperLeft = document
                .getElementsByClassName("map-side-panel__network-wrapper")
                .item(0);
            var networkWrapperRight = document
                .getElementsByClassName("map-side-panel__network-wrapper")
                .item(1);
            var pingPanel = document.getElementById("map-ping-panel");
            var pingPanelDc = pingPanel.querySelector('[city-label="dc"]');
            var pingPanelCt = pingPanel.querySelector('[city-label="destination"]');
            var pingPanelContent = document.getElementById("map-ping-content");
            var pingPanelButton = document.getElementById("map-ping-button");
            var mapLinkPanel = document.getElementById("map-link-panel");
            var mapLinkName = document.getElementById("map-link__city-name");
            var mapLinkLink = document.getElementById("map-link__city-link");
            var noLocationPageCities = ["equinixSydney", "nextDcSydney", "nextDcBrisbane", "nextDcMelbourne"];

            // function called when some starting point (data center) is selected
            function showSelection(cityName) {
                // adjust display of dropdowns
                selectStartCont.setAttribute("active", "");
                selectEnd.removeAttribute("disabled");
                selectEndCont.removeAttribute("disabled");

                // get data about starting point from json
                const curEndpoints = Object.keys(datacenterDetails[cityName].endpoint); // valid city endpoints of the data center

                // display the lines and city
                [...document.querySelectorAll(`.city-group`)].forEach((group) => {
                    if (group.id === cityName) group.setAttribute("dc", "");
                    else group.removeAttribute("dc");

                    if (group.id === cityName || curEndpoints.includes(group.id))
                        group.setAttribute("on", "");
                    else group.removeAttribute("on");
                });
                try {
                    [
                        ...document.querySelector("[city-lines]").querySelectorAll("path"),
                    ].forEach((e) => e.removeAttribute("on"));
                    [
                        ...document.querySelectorAll(
                            `[dc="${cityName}"], [city="${cityName}"]`
                        ),
                    ].forEach((e) => {
                        setTimeout(() => e.setAttribute("on", ""), Math.random() * 280);
                    });
                } catch { }

                // adjust display of destination dropdown to highlight available cities
                [...selectEnd.querySelectorAll("option")].forEach((opt) => {
                    if (curEndpoints.includes(opt.value) || !opt.value)
                        opt.removeAttribute("disabled");
                    else opt.setAttribute("disabled", "");
                });

                // adjust ping display for the datacenter to (selected?) global city
                if (curEndpoints.includes(selectEnd.value))
                    selectDestination(selectEnd.value);
                else {
                    selectEnd.value = "";
                    selectEndCont.removeAttribute("active");
                    // destinationDetails.setAttribute('off', '');
                    [...document.querySelectorAll("[dc][city]")].forEach((e) =>
                        e.removeAttribute("selected")
                    );
                    pingPanel.removeAttribute("active");
                }

                // hide left and right arrows if less than or equal to 6 carriers in city
                if (vw > 767) {
                    if (datacenterDetails[cityName]["carriers"].length <= 6) {
                        hideArrowButtons(0);
                        document
                            .getElementsByClassName("map-side-panel__carriers-wrapper")
                            .item(0).style.justifyContent = "center";
                    } else {
                        showArrowButtons(0);
                        document
                            .getElementsByClassName("map-side-panel__carriers-wrapper")
                            .item(0).style.justifyContent = "flex-start";
                    }
                }

                // Hide and show carrier depending on if a city is live or not
                var learnMoreButton = document
                    .getElementsByClassName("map__ping-city-link")
                    .item(0);

                if (noLocationPageCities.includes(cityName)) {
                    networkWrapperLeft.style.visibility = "hidden";
                    learnMoreButton.style.visibility = "hidden";
                } else {
                    networkWrapperLeft.style.visibility = "visible";
                    learnMoreButton.style.visibility = "visible";
                }

                // change carriers
                handleCarriersChange(0, cityName);

                // hide map link panel
                mapLinkPanel.classList.remove("active-panel");

                // change learn more link and datasheet city name/link
                var learnMoreLink = document
                    .getElementsByClassName("map__ping-city-link")
                    .item(0);
                var downloadDataSheetBtn = document
                    .getElementsByClassName("button button-primary bg-primary-2")
                    .item(0);
                var capitalizedName = document
                    .getElementById(cityName)
                    .getElementsByClassName("city-name")
                    .item(0).innerHTML;
                learnMoreLink.href = "/dc_location/" + cityName + "/";
                downloadDataSheetBtn.innerHTML =
                    "Visit " + capitalizedName + " Data Centre";
                downloadDataSheetBtn.href = "/dc_location/" + cityName + "/";
            }

            var closeSelection = () => {
                // telcoContainer.removeAttribute('on');
                selectStartCont.removeAttribute("active");
                selectEnd.value = "";
                selectEnd.setAttribute("disabled", "");
                selectEndCont.setAttribute("disabled", "");
                [
                    ...document.querySelector("[city-lines]").querySelectorAll("path"),
                ].forEach((e) => e.removeAttribute("on"));
                [...document.querySelectorAll(`.city-group`)].forEach((group) => {
                    if (Object.keys(datacenterDetails).includes(group.id))
                        group.setAttribute("dc", "");
                    group.removeAttribute("on");
                });

                // hide menu
                if (expanded) {
                    expandMenu();
                }

                // change download data sheet button text to "Select a city"
                var downloadDataSheetBtn = document
                    .getElementsByClassName("button button-primary bg-primary-2")
                    .item(0);
                downloadDataSheetBtn.innerHTML = "Select a city";
                downloadDataSheetBtn.href = "#";

                closeDestination();
            };

            function selectDestination(cityName) {
                selectEndCont.setAttribute("active", "");
                // destinationDetails.removeAttribute('off');
                [...document.querySelectorAll("[dc][city]")].forEach((e) =>
                    e.removeAttribute("selected")
                );

                // add dc to selected destination city to make it highlighted
                let otherCities = document.querySelectorAll(
                    "g.city-group:not(#" + selectStart.value + ")"
                );
                for (let i = 0; i < otherCities.length; i++) {
                    otherCities[i].removeAttribute("dc");
                }
                document.querySelector("#" + cityName).setAttribute("dc", "");

                // Hide map-panel-a-notification
                document.getElementById("map-panel-a-notification").style.maxHeight = "0px";
                document.getElementById("map-panel-a-notification").style.visibility =
                    "hidden";
                sidePanel.classList.remove("notification-active");
                document
                    .getElementById("map-controls-holder")
                    .classList.remove("notification-active");

                // set other lines invisible
                let otherLines = document.querySelectorAll(`[city-lines] path`);
                for (let i = 0; i < otherLines.length; i++) {
                    let dcFilter = otherLines[i].getAttribute("dc");
                    let cityFilter = otherLines[i].getAttribute("cityFilter");
                    if (
                        !(dcFilter === selectStart.value && cityFilter === cityName) &&
                        !(cityFilter === selectStart.value && dcFilter === cityName)
                    ) {
                        otherLines[i].setAttribute("invisible", "");
                    }
                }

                // Hide and show carrier depending on if a city is live or not
                var learnMoreButton = document
                    .getElementsByClassName("map__ping-city-link")
                    .item(1);

                if (noLocationPageCities.includes(cityName)) {
                    networkWrapperRight.style.visibility = "hidden";
                    learnMoreButton.style.visibility = "hidden";
                } else {
                    networkWrapperRight.style.visibility = "visible";
                    learnMoreButton.style.visibility = "visible";
                }

                const curLine = document.querySelector(
                    `[dc="${selectStart.value}"][city="${cityName}"],
		[city="${selectStart.value}"][dc="${cityName}"]`
                );
                curLine.setAttribute("selected", "");

                const dString = curLine
                    .getAttribute("d")
                    .replaceAll(",", " ")
                    .replaceAll("M", "")
                    .replaceAll("C", " ");
                const [px, py, qx, qy, rx, ry, sx, sy] = dString.split(/[ ]{1,}/);

                function getMidPoint(p, q, r, s) {
                    return (
                        (parseFloat(p) +
                            3 * parseFloat(q) +
                            3 * parseFloat(r) +
                            parseFloat(s)) /
                        8
                    );
                }
                const [anchorX, anchorY] = [
                    getMidPoint(px, qx, rx, sx),
                    getMidPoint(py, qy, ry, sy),
                ];

                const rootSVG = document.querySelector("#map-element svg");
                const point = rootSVG.createSVGPoint();
                let matrix, position;

                matrix = curLine.getCTM();
                point.x = anchorX;
                point.y = anchorY;
                position = point.matrixTransform(matrix);

                pingPanel.style.left = position.x + "px";
                pingPanel.style.top = position.y - 20 + "px";

                changeText(
                    pingPanelDc,
                    selectStart.options[selectStart.selectedIndex].label
                );
                changeText(pingPanelCt, selectEnd.options[selectEnd.selectedIndex].label);
                changePing(
                    document.querySelector("#map-ping-panel-ping"),
                    `${datacenterDetails[selectStart.value].endpoint[cityName].ping
                    }`
                );
                pingPanel.setAttribute("active", "");

                // change carriers
                handleCarriersChange(1, cityName);

                // hide left and right arrows if less than or equal to 6 carriers in city
                if (vw > 767) {
                    if (datacenterDetails[cityName]["carriers"].length <= 6) {
                        hideArrowButtons(1);
                        document
                            .getElementsByClassName("map-side-panel__carriers-wrapper")
                            .item(1).style.justifyContent = "center";
                    } else {
                        showArrowButtons(1);
                        document
                            .getElementsByClassName("map-side-panel__carriers-wrapper")
                            .item(1).style.justifyContent = "flex-start";
                    }
                }

                // expand menu
                if (!expanded) {
                    expandMenu();
                }

                // change learn more link and datasheet city name/link
                var learnMoreLink = document
                    .getElementsByClassName("map__ping-city-link")
                    .item(1);
                var downloadDataSheetBtn = document
                    .getElementsByClassName("button button-primary bg-primary-2")
                    .item(1);
                var capitalizedName = document
                    .getElementById(cityName)
                    .getElementsByClassName("city-name")
                    .item(0).innerHTML;
                learnMoreLink.href = "/dc_location/" + cityName + "/";
                downloadDataSheetBtn.innerHTML =
                    "Visit " + capitalizedName + " Data Centre";
                downloadDataSheetBtn.href = "/dc_location/" + cityName + "/";
            }

            var closeDestination = () => {
                selectEndCont.removeAttribute("active");
                if (selectStart.value)
                    document
                        .querySelectorAll("g.city-group:not(#" + selectStart.value + ")")
                        .forEach((e) => e.removeAttribute("dc"));
                // destinationDetails.setAttribute('off', '');
                [...document.querySelectorAll("[dc][city]")].forEach((e) =>
                    e.removeAttribute("selected")
                );

                [...document.querySelectorAll(`[city-lines] path[invisible]`)].forEach(
                    (e) => e.removeAttribute("invisible")
                );
                pingPanel.removeAttribute("active");

                // change download data sheet button text to "Select a city"
                var downloadDataSheetBtn = document
                    .getElementsByClassName("button button-primary bg-primary-2")
                    .item(1);
                downloadDataSheetBtn.innerHTML = "Select a city";
                downloadDataSheetBtn.href = "#";
            };

            selectStart.addEventListener("change", () => {
                if (selectStart.value) {
                    showSelection(selectStart.value);
                } else {
                    closeSelection();
                }
            });

            selectEnd.addEventListener("change", () => {
                if (selectEnd.value) {
                    selectDestination(selectEnd.value);
                } else {
                    closeDestination();
                }
            });

            // listen for pingpanel going off the page
            let prvRight = parseInt(pingPanelContent.getBoundingClientRect().right);
            setInterval(() => {
                if (parseInt(pingPanelContent.getBoundingClientRect().right) != prvRight) {
                    prvRight =
                        parseInt(pingPanelContent.getBoundingClientRect().right) || 0;
                    marginLeft = parseInt(pingPanelContent.style.marginLeft) || 0;
                    mapBounds = parseInt(mapElement.getBoundingClientRect().right);
                    if (prvRight - marginLeft > mapBounds) {
                        pingPanelContent.style.marginLeft =
                            mapBounds - prvRight + marginLeft + "px";
                    } else {
                        pingPanelContent.style.marginLeft = "";
                    }
                    pingPanelButton.style.marginRight = pingPanelContent.style.marginLeft;
                }
            }, 20);

            /**
             *  Expand side panel menu on expand btn click
             */
            var expanded = false;
            var expandIcon = sidePanel.querySelector(".expand-icon");
            var sidePanelBMaxHeight = vw > 767 ? "500px" : "60vh";
            var expandOverlay = document.getElementById("map-side-panel-overlay");

            function expandMenu() {
                if (expanded) {
                    sidePanelB.style.maxHeight = "0px";
                    expandIcon.style.transform = "rotate(0deg)";
                    expanded = false;
                    expandOverlay.style.visibility = "hidden";
                    expandOverlay.style.opacity = 0;
                    if (vw > 767) {
                        window.scrollTo({
                            top: 0,
                            behavior: "smooth",
                        });
                    }
                } else if (selectStart.value !== "" || selectEnd.value !== "") {
                    sidePanelB.style.maxHeight = sidePanelBMaxHeight;
                    expandIcon.style.transform = "rotate(180deg)";
                    if (vw > 767) {
                        window.scrollTo({
                            top:
                                sidePanel.offsetTop -
                                sidePanel.scrollTop +
                                sidePanel.clientTop -
                                200,
                            behavior: "smooth",
                        });
                    }
                    expanded = true;
                    expandOverlay.style.visibility = "visible";
                    expandOverlay.style.opacity = 0.6;
                }
            }

            /**
             * Carrier nav buttons click handlers. Scrolls left or right
             * @param {*} carriersWrapperIndex 0 for left side carriers, 1 for right side carriers
             */

            function carrierScrollLeft(carriersWrapperIndex) {
                var wrapper =
                    carriersWrapperIndex <= 0 ? carrierWrapperLeft : carrierWrapperRight;
                var scrollWidth = wrapper
                    .getElementsByClassName("service-item")
                    .item(0).clientWidth;
                wrapper.scroll({
                    left: wrapper.scrollLeft - scrollWidth,
                    behavior: "smooth",
                });
            }

            function carrierScrollRight(carriersWrapperIndex) {
                var wrapper =
                    carriersWrapperIndex <= 0 ? carrierWrapperLeft : carrierWrapperRight;
                var scrollWidth = wrapper
                    .getElementsByClassName("service-item")
                    .item(1).clientWidth;
                wrapper.scroll({
                    left: wrapper.scrollLeft + scrollWidth,
                    behavior: "smooth",
                });
            }

            // Attach events to buttons
            var carrierNavButtonsLeft = document.getElementsByClassName(
                "carriers-nav-btn left"
            );
            var carrierNavButtonsRight = document.getElementsByClassName(
                "carriers-nav-btn right"
            );
            try {
                carrierNavButtonsLeft.item(0).addEventListener("click", function () {
                    carrierScrollLeft(0);
                });
                carrierNavButtonsRight.item(0).addEventListener("click", function () {
                    carrierScrollRight(0);
                });
                carrierNavButtonsLeft.item(1).addEventListener("click", function () {
                    carrierScrollLeft(1);
                });
                carrierNavButtonsRight.item(1).addEventListener("click", function () {
                    carrierScrollRight(1);
                });
            } catch (e) {
                console.error(e);
            }

            function handleCarriersChange(carriersWrapperIndex, cityName) {
                // determine if wrapper is on left or right side
                var leftRightSide = carriersWrapperIndex > 0 ? 1 : 0;
                var carrierWrapper = document
                    .getElementsByClassName("map-side-panel__carriers-wrapper")
                    .item(leftRightSide);
                var mspWrapper = document
                    .getElementsByClassName("map-side-panel__msp-wrapper msp-wrapper")
                    .item(leftRightSide);
                var cityDetails = datacenterDetails[cityName];

                // hide carriers that aren't in the selected city
                [...carrierWrapper.getElementsByClassName("service-item")].forEach(
                    function (carrierEl) {
                        if (
                            cityDetails["carriers"].includes(
                                carrierEl.getAttribute("carrier")
                            )
                        ) {
                            carrierEl.style.display = "block";
                        } else {
                            carrierEl.style.display = "none";
                        }
                    }
                );

                // hide msp providers that aren't in the selected city
                [...mspWrapper.getElementsByClassName("msp-provider")].forEach(function (
                    mspEl
                ) {
                    if (cityDetails["msps"].includes(mspEl.getAttribute("provider"))) {
                        mspEl.style.display = "block";
                    } else {
                        mspEl.style.display = "none";
                    }
                });
            }

            function hideArrowButtons(carriersWrapperIndex) {
                // determine if wrapper is on left or right side
                var leftRightSide = carriersWrapperIndex > 0 ? 1 : 0;
                var networkTopDiv = document
                    .getElementsByClassName("map-side-panel__network-top")
                    .item(leftRightSide);
                [...networkTopDiv.getElementsByClassName("carriers-nav-btn")].forEach(
                    function (btn) {
                        btn.style.display = "none";
                    }
                );
            }

            function showArrowButtons(carriersWrapperIndex) {
                // determine if wrapper is on left or right side
                var leftRightSide = carriersWrapperIndex > 0 ? 1 : 0;
                var networkTopDiv = document
                    .getElementsByClassName("map-side-panel__network-top")
                    .item(leftRightSide);
                [...networkTopDiv.getElementsByClassName("carriers-nav-btn")].forEach(
                    function (btn) {
                        btn.style.display = "block";
                    }
                );
            }

            // [...document.getElementsByClassName("map-side-panel__carriers-wrapper")
            //     .item(0)
            //     .getElementsByClassName("service-item")]
            //     .forEach(function(btn){
            //         btn.addEventListener("click", function(e){
            //             e.stopPropagation();
            //             e.preventDefault();

            //             handleCarrierClick(e, 0);
            //         });
            //     });

            // [...document.getElementsByClassName("map-side-panel__carriers-wrapper")
            //     .item(1)
            //     .getElementsByClassName("service-item")]
            //     .forEach(function(btn){
            //         btn.addEventListener("click", function(e){
            //             e.stopPropagation();
            //             e.preventDefault();

            //             handleCarrierClick(e, 1)
            //         });
            //     });

            /**
             *  When you hover over an open city, how map link panel and change text/link accordingly
             */
            if (vw > 992) {
                document.querySelectorAll(".city-group[dc]").forEach((cityGroupEl) => {
                    if (cityGroupEl.getAttribute("soon") != null) return;

                    var cityGroupRect = cityGroupEl.querySelector(
                        "ellipse[fill]:not([pulse]):not([identifier])"
                    );

                    var rootSVG = document.querySelector("#map-element svg");
                    var point = rootSVG.createSVGPoint();
                    var matrix, position;
                    matrix = cityGroupEl.getCTM();

                    cityGroupEl.addEventListener("mouseenter", function (e) {
                        e.stopPropagation();
                        e.stopImmediatePropagation();
                        e.preventDefault();

                        if (selectStart.value || selectEnd.value) {
                            return;
                        }

                        // inner content and links
                        mapLinkName.innerHTML = cityGroupEl
                            .getElementsByClassName("city-name")
                            .item(0).innerHTML;
                        mapLinkLink.href = "/dc_location/" + cityGroupEl.id;

                        // positioning
                        point.x = cityGroupRect.getAttribute("cx");
                        point.y = cityGroupRect.getAttribute("cy");
                        position = point.matrixTransform(matrix);

                        mapLinkPanel.style.left = position.x + "px";
                        mapLinkPanel.style.top = position.y + "px";

                        // styling
                        mapLinkPanel.classList.add("active-panel");
                    });

                    cityGroupEl.addEventListener("mouseleave", function (e) {
                        e.stopPropagation();
                        e.stopImmediatePropagation();
                        e.preventDefault();

                        if (selectStart.value || selectEnd.value) {
                            return;
                        }

                        mapLinkPanel.classList.remove("active-panel");
                    });
                });
            }

        </script>
    </div>
    <script>
        // const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);

        /**
         * Initialize panzoom
         */
        const elem = document.getElementById('map-element');
        const panzoom = Panzoom(elem, {
            startX: -90,
            startScale: 1,
            minScale: 0.5,
        });

        var mapBtnZoomIn = document.getElementById("map-btn-zoom-in");
        var mapBtnZoomOut = document.getElementById("map-btn-zoom-out");
        var mapBtnReset = document.getElementById("map-btn-zoom-reset");
        var mapPingContent = document.getElementById("map-ping-content");

        /**
         * Zoom in and out, and reset
         */
        mapBtnZoomIn.addEventListener("click", function () {
            panzoom.zoomIn();
        });
        mapBtnZoomOut.addEventListener("click", function () {
            panzoom.zoomOut();
        });
        mapBtnReset.addEventListener("click", function () {
            panzoom.reset();
        })

        /**
         * When zooming, make map ping panel change scale based on zoom level.
         */
        elem.addEventListener("panzoomzoom", function (e) {
            mapPingContent.style.transform = `scale(${1 / e.detail.scale})`;
        });
        elem.addEventListener("panzoomreset", function (e) {
            mapPingContent.style.transform = `scale(${1 / e.detail.scale})`;
        })

        /**
         * Differentiate between click and drag through variable isDraggedMap
         */
        var isDraggedMap = false;

        elem.addEventListener("panzoomstart", function () {
            isDraggedMap = false;
        })

        elem.addEventListener("panzoompan", function () {
            isDraggedMap = true;
        })

        elem.addEventListener("click", function (e) {
            if (!isDraggedMap)
                handleMapClick();
        })
    </script>
</div>